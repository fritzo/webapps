'use strict';var CodeMirror=function(){function i(a,b){var c,d,e;function f(j){return 0<=j&&j<q.size}function k(j){for(var a=q;!a.lines;)for(var g=0;;++g){var b=a.children[g],c=b.chunkSize();if(j<c){a=b;break}j-=c}return a.lines[j]}function m(j,a){ba=!0;for(var g=a-j.height,b=j;b;b=b.parent)b.height+=g}function o(j){var a={line:0,ch:0};ga(a,{line:q.size-1,ch:k(q.size-1).text.length},Fa(j),a,a);ha=!0}function fa(j){var a=ra[P(j,"keyCode")],g=T[l.keyMap].auto,b,c;if(null==a||j.altGraphKey)return g&&
(l.keyMap=g.call?g.call(null,C):g),null;P(j,"altKey")&&(a="Alt-"+a);P(j,"ctrlKey")&&(a="Ctrl-"+a);P(j,"metaKey")&&(a="Cmd-"+a);P(j,"shiftKey")&&(b=L("Shift-"+a,l.extraKeys,l.keyMap))?c=!0:b=L(a,l.extraKeys,l.keyMap);"string"==typeof b&&(b=hb.propertyIsEnumerable(b)?hb[b]:null);if(a=g)if(!(a=b))a=ra[P(j,"keyCode")],a=!("Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a);a&&(l.keyMap=g.call?g.call(null,C):g);if(!b)return!1;g=U;try{l.readOnly&&(Ua=!0),c&&(U=null),b(C)}finally{U=g,Ua=!1}N(j);return!0}function za(){if("nocursor"!=
l.readOnly){if(!V){if(l.onFocus)l.onFocus(C);V=!0;-1==E.className.search(/\bCodeMirror-focused\b/)&&(E.className+=" CodeMirror-focused");Ga||xa(!0)}Va();Kb()}}function ib(){if(V){if(l.onBlur)l.onBlur(C);V=!1;ia&&t(function(){ia&&(ia(),ia=null)})();E.className=E.className.replace(" CodeMirror-focused","")}clearInterval(jb);setTimeout(function(){V||(U=null)},150)}function ga(j,a,g,b,c){if(!Ua){if(W){var d=[];q.iter(j.line,a.line+1,function(j){d.push(j.text)});for(W.addChange(j.line,g.length,d);W.done.length>
l.undoDepth;)W.done.shift()}Lb(j,a,g,b,c)}}function Mb(j,a,g){for(var b=(j=j.pop())?j.length:0,c=[],d=0<g?0:b-1,b=0<g?b:-1;d!=b;d+=g){var e=j[d],f=[],H=e.start+e.added;q.iter(e.start,H,function(j){f.push(j.text)});c.push({start:e.start,added:e.old.length,old:f});var l=I({line:e.start+e.old.length-1,ch:pc(f[f.length-1],e.old[e.old.length-1])});Lb({line:e.start,ch:0},{line:H-1,ch:k(H-1).text.length},e.old,l,l)}ha=!0;a.push(c)}function Lb(j,a,g,b,oc){if(!Ua){var e=!1,f=ja.length;l.lineWrapping||q.iter(j.line,
a.line,function(j){if(j.text.length==f)return e=!0});if(j.line!=a.line||1<g.length)ba=!0;var Q=a.line-j.line,H=k(j.line),h=k(a.line);if(0==j.ch&&0==a.ch&&""==g[g.length-1]){var i=[],H=null;j.line?(H=k(j.line-1),H.fixMarkEnds(h)):h.fixMarkStarts();for(var J=0,p=g.length-1;J<p;++J)i.push(n.inheritMarks(g[J],H));Q&&q.remove(j.line,Q,Ha);i.length&&q.insert(j.line,i)}else if(H==h)if(1==g.length)H.replace(j.ch,a.ch,g[0]);else{h=H.split(a.ch,g[g.length-1]);H.replace(j.ch,null,g[0]);H.fixMarkEnds(h);i=[];
J=1;for(p=g.length-1;J<p;++J)i.push(n.inheritMarks(g[J],H));i.push(h);q.insert(j.line+1,i)}else if(1==g.length)H.replace(j.ch,null,g[0]),h.replace(null,a.ch,""),H.append(h),q.remove(j.line+1,Q,Ha);else{i=[];H.replace(j.ch,null,g[0]);h.replace(null,a.ch,g[g.length-1]);H.fixMarkEnds(h);J=1;for(p=g.length-1;J<p;++J)i.push(n.inheritMarks(g[J],H));1<Q&&q.remove(j.line+1,Q-1,Ha);q.insert(j.line+1,i)}if(l.lineWrapping){var u=s.clientWidth/kb()-3;q.iter(j.line,j.line+g.length,function(j){if(!j.hidden){var a=
Math.ceil(j.text.length/u)||1;a!=j.height&&m(j,a)}})}else q.iter(j.line,J+g.length,function(j){j=j.text;j.length>f&&(ja=j,f=j.length,ka=null,e=!1)}),e&&(f=0,ja="",ka=null,q.iter(0,q.size,function(j){j=j.text;j.length>f&&(f=j.length,ja=j)}));h=[];Q=g.length-Q-1;J=0;for(i=Z.length;J<i;++J)p=Z[J],p<j.line?h.push(p):p>a.line&&h.push(p+Q);J=j.line+Math.min(g.length,500);qc(j.line,J);h.push(J);Z=h;lb(100);X.push({from:j.line,to:a.line+1,diff:Q});j={from:j,to:a,text:g};if(Ia){for(g=Ia;g.next;g=g.next);g.next=
j}else Ia=j;Ja(b,oc,c.line<=Math.min(a.line,a.line+Q)?c.line:c.line+Q,d.line<=Math.min(a.line,a.line+Q)?d.line:d.line+Q);s.clientHeight&&(O.style.height=q.height*ca()+2*y.offsetTop+"px")}}function da(j,a,g){function b(c){if(ea(c,a))return c;if(!ea(g,c))return e;var d=c.line+j.length-(g.line-a.line)-1,gb=c.ch;c.line==g.line&&(gb+=j[j.length-1].length-(g.ch-(g.line==a.line?a.ch:0)));return{line:d,ch:gb}}var a=I(a),g=g?I(g):a,j=Fa(j),e;Nb(j,a,g,function(j){e=j;return{from:b(c),to:b(d)}});return e}function Aa(j,
a){Nb(Fa(j),c,d,function(j){return"end"==a?{from:j,to:j}:"start"==a?{from:c,to:c}:{from:c,to:j}})}function Nb(j,a,g,b){b=b({line:a.line+j.length-1,ch:1==j.length?j[0].length+a.ch:j[j.length-1].length});ga(a,g,j,b.from,b.to)}function Ob(j,a){var g=j.line,b=a.line;if(g==b)return k(g).text.slice(j.ch,a.ch);var c=[k(g).text.slice(j.ch)];q.iter(g+1,b,function(j){c.push(j.text)});c.push(k(b).text.slice(0,a.ch));return c.join("\n")}function Wa(){return Ob(c,d)}function Va(){mb||nb.set(l.pollInterval,function(){ob();
Pb();V&&Va();pb()})}function Ka(){function j(){ob();!Pb()&&!a?(a=!0,nb.set(60,j)):(mb=!1,Va());pb()}var a=!1;mb=!0;nb.set(20,j)}function Pb(){if(Ga||!V||rc(A)||l.readOnly)return!1;var j=A.value;if(j==la)return!1;U=null;for(var a=0,g=Math.min(la.length,j.length);a<g&&la[a]==j[a];)++a;a<la.length?c={line:c.line,ch:c.ch-(la.length-a)}:qb&&K(c,d)&&(d={line:d.line,ch:Math.min(k(d.line).text.length,d.ch+(j.length-a))});Aa(j.slice(a),"end");la=j;return!0}function xa(a){K(c,d)?a&&(la=A.value=""):(la="",A.value=
Wa(),A.select())}function sa(){"nocursor"!=l.readOnly&&A.focus()}function Ea(){if($.getBoundingClientRect){var a=$.getBoundingClientRect();if(!(La&&a.top==a.bottom)){var b=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(0>a.top||a.bottom>b)&&$.scrollIntoView()}}}function Da(){var a=Ba(e?c:d),b=l.lineWrapping?Math.min(a.x,y.offsetWidth):a.x;return Qb(b,a.y,b,a.yBot)}function Qb(a,b,g,c){var d=y.offsetLeft,e=y.offsetTop,f=ca(),b=b+e,c=c+e,a=a+d,g=g+d,
k=s.clientHeight,h=s.scrollTop,d=!1,e=!0;b<h?(s.scrollTop=Math.max(0,b-2*f),d=!0):c>h+k&&(s.scrollTop=c+f-k,d=!0);b=s.clientWidth;c=s.scrollLeft;f=l.fixedGutter?R.clientWidth:0;a<c+f?(50>a&&(a=0),s.scrollLeft=Math.max(0,a-10-f),d=!0):g>b+c-3&&(s.scrollLeft=g+10-b,d=!0,g>O.clientWidth&&(e=!1));if(d&&l.onScroll)l.onScroll(C);return e}function Rb(){var a=ca(),b=s.scrollTop-y.offsetTop,g=Math.max(0,Math.floor(b/a)),a=Math.ceil((b+s.clientHeight)/a);return{from:h(q,g),to:h(q,a)}}function ta(a,b){if(s.clientWidth){var g=
Rb();if(!(!0!==a&&0==a.length&&g.from>M&&g.to<S)){var c=Math.max(g.from-100,0),g=Math.min(q.size,g.to+100);M<c&&20>c-M&&(c=M);S>g&&20>S-g&&(g=Math.min(q.size,S));for(var d=!0===a?[]:sc([{from:M,to:S,domStart:0}],a),e=0,f=0;f<d.length;++f){var k=d[f];k.from<c&&(k.domStart+=c-k.from,k.from=c);k.to>g&&(k.to=g);k.from>=k.to?d.splice(f--,1):e+=k.to-k.from}if(e!=g-c){d.sort(function(a,j){return a.domStart-j.domStart});var h=ca(),e=R.style.display;Y.style.display="none";tc(c,g,d);Y.style.display=R.style.display=
"";(f=c!=M||g!=S||Sb!=s.clientHeight+h)&&(Sb=s.clientHeight+h);M=c;S=g;Ma=z(q,c);Xa.style.top=Ma*h+"px";s.clientHeight&&(O.style.height=q.height*h+2*y.offsetTop+"px");if(Y.childNodes.length!=S-M)throw Error("BAD PATCH! "+JSON.stringify(d)+" size="+(S-M)+" nodes="+Y.childNodes.length);if(l.lineWrapping){ka=s.clientWidth;var i=Y.firstChild,n=!1;q.iter(M,S,function(a){if(!a.hidden){var j=Math.round(i.offsetHeight/h)||1;a.height!=j&&(m(a,j),ba=n=!0)}i=i.nextSibling});n&&(O.style.height=q.height*h+2*y.offsetTop+
"px")}else null==ka&&(ka=rb(ja)),ka>s.clientWidth?(y.style.width=ka+"px",O.style.width="",O.style.width=s.scrollWidth+"px"):y.style.width=O.style.width="";R.style.display=e;(f||ba)&&Tb();Ub();if(!b&&l.onUpdate)l.onUpdate(C);return!0}}}else M=S=Ma=0}function sc(a,b){for(var g=0,c=b.length||0;g<c;++g){for(var d=b[g],e=[],f=d.diff||0,k=0,h=a.length;k<h;++k){var l=a[k];d.to<=l.from&&d.diff?e.push({from:l.from+f,to:l.to+f,domStart:l.domStart}):d.to<=l.from||d.from>=l.to?e.push(l):(d.from>l.from&&e.push({from:l.from,
to:d.from,domStart:l.domStart}),d.to<l.to&&e.push({from:d.to+f,to:l.to+f,domStart:l.domStart+(d.to-l.from)}))}a=e}return a}function tc(a,b,g){if(g.length){for(var c=function(a){var j=a.nextSibling;a.parentNode.removeChild(a);return j},d=0,e=Y.firstChild,f=0;f<g.length;++f){for(var k=g[f];k.domStart>d;)e=c(e),d++;for(var l=0,k=k.to-k.from;l<k;++l)e=e.nextSibling,d++}for(;e;)e=c(e)}else Y.innerHTML="";var h=g.shift(),e=Y.firstChild,l=a,i=ua.createElement("div");q.iter(a,b,function(a){h&&h.to==l&&(h=
g.shift());if(!h||h.from>l){if(a.hidden)var j=i.innerHTML="<pre></pre>";else j="<pre>"+a.getHTML(sb)+"</pre>",a.className&&(j='<div style="position: relative"><pre class="'+a.className+'" style="position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2">&#160;</pre>'+j+"</div>");i.innerHTML=j;Y.insertBefore(i.firstChild,e)}else e=e.nextSibling;++l})}function Tb(){if(l.gutter||l.lineNumbers){var a=Xa.offsetHeight,b=s.clientHeight;R.style.height=(2>a-b?b:a)+"px";var g=[],c=M;q.iter(M,Math.max(S,
M+1),function(a){if(a.hidden)g.push("<pre></pre>");else{var j=a.gutterMarker,b=l.lineNumbers?c+l.firstLineNumber:null;j&&j.text?b=j.text.replace("%N%",null!=b?b:""):null==b&&(b="\u00a0");g.push(j&&j.style?'<pre class="'+j.style+'">':"<pre>",b);for(j=1;j<a.height;++j)g.push("<br/>&#160;");g.push("</pre>")}++c});R.style.display="none";Na.innerHTML=g.join("");for(var a=(""+q.size).length,b=Na.firstChild,d=b.textContent||b.innerText||b.nodeValue||"",e="";d.length+e.length<a;)e+="\u00a0";e&&b.insertBefore(ua.createTextNode(e),
b.firstChild);R.style.display="";y.style.marginLeft=R.offsetWidth+"px";ba=!1}}function Ub(){var a=K(c,d),b=Ba(c,!0),g=a?b:Ba(d,!0),f=e?b:g,k=ca(),h=va(E),i=va(Y);Oa.style.top=Math.max(0,Math.min(s.offsetHeight,f.y+i.top-h.top))+"px";Oa.style.left=Math.max(0,Math.min(s.offsetWidth,f.x+i.left-h.left))+"px";if(a)$.style.top=f.y+"px",$.style.left=(l.lineWrapping?Math.min(f.x,y.offsetWidth):f.x)+"px",$.style.display="",Ya.style.display="none";else{var a=b.y==g.y,n="",f=function(a,j,b,g){n+='<div class="CodeMirror-selected" style="position: absolute; left: '+
a+"px; top: "+j+"px; right: "+b+"px; height: "+g+'px"></div>'};c.ch&&0<=b.y&&f(b.x,b.y,a?y.clientWidth-g.x:0,k);b=Math.max(0,b.y+(c.ch?k:0));h=Math.min(g.y,y.clientHeight)-b;h>0.2*k&&f(0,b,0,h);(!a||!c.ch)&&g.y<y.clientHeight-0.5*k&&f(0,g.y,y.clientWidth-g.x,k);Ya.innerHTML=n;$.style.display="none";Ya.style.display=""}}function Vb(a){U=a?U||(e?d:c):null}function ma(a,b){var g=U&&I(U);g&&(ea(g,a)?a=g:ea(b,g)&&(b=g));Ja(a,b);Za=!0}function Ja(a,b,g,f){$a=null;null==g&&(g=c.line,f=d.line);if(!K(c,a)||
!K(d,b)){if(ea(b,a))var k=b,b=a,a=k;a.line!=g&&(a=ab(a,g,c.ch));b.line!=f&&(b=ab(b,f,d.ch));K(a,b)?e=!1:K(a,d)?e=!1:K(b,c)&&(e=!0);c=a;d=b;na=!0}}function ab(a,b,g){function c(b){for(var d=a.line+b,e=1==b?q.size:-1;d!=e;){var ya=k(d);if(!ya.hidden){b=a.ch;if(b>g||b>ya.text.length)b=ya.text.length;return{line:d,ch:b}}d+=b}}return!k(a.line).hidden?a:a.line>=b?c(1)||c(-1):c(-1)||c(1)}function oa(a,b,g){a=I({line:a,ch:b||0});(g?ma:Ja)(a,a)}function bb(a){return Math.max(0,Math.min(a,q.size-1))}function I(a){if(0>
a.line)return{line:0,ch:0};if(a.line>=q.size)return{line:q.size-1,ch:k(q.size-1).text.length};var b=a.ch,g=k(a.line).text.length;return null==b||b>g?{line:a.line,ch:g}:0>b?{line:a.line,ch:0}:a}function tb(a,b){function g(b){if(l==(0>a?0:i.text.length)){if(b=!b)a:{for(var b=h+a,g=0>a?-1:q.size;b!=g;b+=a){var c=k(b);if(!c.hidden){h=b;i=c;b=!0;break a}}b=void 0}if(b)l=0>a?i.text.length:0;else return!1}else l+=a;return!0}var f=e?c:d,h=f.line,l=f.ch,i=k(h);if("char"==b)g();else if("column"==b)g(!0);else if("word"==
b)for(f=!1;!(0>a)||g();){if(ub(i.text.charAt(l)))f=!0;else if(f){0>a&&(a=1,g());break}if(0<a&&!g())break}return{line:h,ch:l}}function Wb(a){for(var b=k(a.line).text,g=a.ch,c=a.ch;0<g&&ub(b.charAt(g-1));)--g;for(;c<b.length&&ub(b.charAt(c));)++c;ma({line:a.line,ch:g},{line:a.line,ch:c})}function uc(a){ma({line:a,ch:0},{line:a,ch:k(a).text.length})}function cb(a,b){b||(b="add");if("smart"==b)if(G.indent)var g=db(a);else b="prev";var e=k(a),f=e.indentation(l.tabSize),h=e.text.match(/^\s*/)[0],i;"prev"==
b?i=a?k(a-1).indentation(l.tabSize):0:"smart"==b?i=G.indent(g,e.text.slice(h.length),e.text):"add"==b?i=f+l.indentUnit:"subtract"==b&&(i=f-l.indentUnit);i=Math.max(0,i);if(i-f){f="";g=0;if(l.indentWithTabs)for(e=Math.floor(i/l.tabSize);e;--e)g+=l.tabSize,f+="\t";for(;g<i;)++g,f+=" "}else{if(c.line!=a&&d.line!=a)return;f=h}da(f,{line:a,ch:0},{line:a,ch:h.length})}function Xb(){G=i.getMode(l,l.mode);q.iter(0,q.size,function(a){a.stateAfter=null});Z=[0];lb()}function vc(){if(l.lineWrapping){E.className+=
" CodeMirror-wrap";var a=s.clientWidth/kb()-3;q.iter(0,q.size,function(b){if(!b.hidden){var g=Math.ceil(b.text.length/a)||1;1!=g&&m(b,g)}});y.style.width=O.style.width=""}else E.className=E.className.replace(" CodeMirror-wrap",""),ka=null,ja="",q.iter(0,q.size,function(a){1!=a.height&&!a.hidden&&m(a,1);a.text.length>ja.length&&(ja=a.text)});X.push({from:0,to:q.size})}function Yb(){for(var a='<span class="cm-tab">',b=0;b<l.tabSize;++b)a+=" ";return a+"</span>"}function wc(){sb=Yb();ta(!0)}function Zb(){s.className=
s.className.replace(/\s*cm-s-\w+/g,"")+l.theme.replace(/(^|\s)\s*/g," cm-s-")}function vb(){this.set=[]}function wb(a,b,g){function c(a,j,b,g){k(a).addMark(new x(j,b,g,d.set))}var a=I(a),b=I(b),d=new vb;if(a.line==b.line)c(a.line,a.ch,b.ch,g);else{c(a.line,a.ch,null,g);for(var e=a.line+1,f=b.line;e<f;++e)c(e,null,null,g);c(b.line,null,b.ch,g)}X.push({from:a.line,to:b.line+1});return d}function $b(a,b){var g=a,c=a;"number"==typeof a?c=k(bb(a)):g=D(a);if(null!=g&&b(c,g))X.push({from:g,to:g+1});else return null;
return c}function ac(a,b){return $b(a,function(a,j){if(a.hidden!=b){a.hidden=b;m(a,b?0:1);var e=c.line,f=d.line;if(b&&(e==j||f==j))e=e==j?ab({line:e,ch:0},e,0):c,f=f==j?ab({line:f,ch:0},f,0):d,Ja(e,f);return ba=!0}})}function rb(a){pa.innerHTML="<pre><span>x</span></pre>";pa.firstChild.firstChild.firstChild.nodeValue=a;return pa.firstChild.firstChild.offsetWidth||10}function bc(a,b){if(0==b)return{top:0,left:0};var c="";l.lineWrapping&&(c=a.text.indexOf(" ",b+2),c=aa(a.text.slice(b+1,0>c?a.text.length:
c+(La?5:0))));pa.innerHTML="<pre>"+a.getHTML(sb,b)+'<span id="CodeMirror-temp-'+cc+'">'+aa(a.text.charAt(b)||" ")+"</span>"+c+"</pre>";var c=document.getElementById("CodeMirror-temp-"+cc),d=c.offsetTop,e=c.offsetLeft;La&&0==d&&0==e&&(d=document.createElement("span"),d.innerHTML="x",c.parentNode.insertBefore(d,c.nextSibling),d=d.offsetTop);return{top:d,left:e}}function Ba(a,b){var c,d=ca(),e=d*(z(q,a.line)-(b?Ma:0));if(0==a.ch)c=0;else{var f=bc(k(a.line),a.ch);c=f.left;l.lineWrapping&&(e+=Math.max(0,
f.top))}return{x:c,y:e,yBot:e+d}}function xb(a,b){function c(a){a=bc(n,a);if(p){var b=Math.round(a.top/d);return Math.max(0,a.left+(b-u)*s.clientWidth)}return a.left}0>b&&(b=0);var d=ca(),e=kb(),f=Ma+Math.floor(b/d),i=h(q,f);if(i>=q.size)return{line:q.size-1,ch:k(q.size-1).text.length};var n=k(i),m=n.text,p=l.lineWrapping,u=p?f-z(q,i):0;if(0>=a&&0==u)return{line:i,ch:0};for(var t=f=0,m=m.length,D,e=Math.min(m,Math.ceil((a+0.9*u*s.clientWidth)/e));;){var F=c(e);if(F<=a&&e<m)e=Math.min(m,Math.ceil(1.2*
e));else{D=F;m=e;break}}if(a>D)return{line:i,ch:m};e=Math.floor(0.8*m);F=c(e);F<a&&(f=e,t=F);for(;;){if(1>=m-f)return{line:i,ch:D-a>a-t?f:m};e=Math.ceil((f+m)/2);F=c(e);F>a?(m=e,D=F):(f=e,t=F)}}function dc(a){var a=Ba(a,!0),b=va(y);return{x:b.left+a.x,y:b.top+a.y,yBot:b.top+a.yBot}}function ca(){if(null==wa){wa="<pre>";for(var a=0;49>a;++a)wa+="x<br/>";wa+="x</pre>"}a=Y.clientHeight;if(a==ec)return yb;ec=a;pa.innerHTML=wa;yb=pa.firstChild.offsetHeight/50||1;pa.innerHTML="";return yb}function kb(){if(s.clientWidth==
fc)return gc;fc=s.clientWidth;return gc=rb("x")}function Ca(a,b){var c=va(s,!0),d,e;try{d=a.clientX,e=a.clientY}catch(f){return null}if(!b&&(d-c.left>s.clientWidth||e-c.top>s.clientHeight))return null;c=va(y,!0);return xb(d-c.left,e-c.top)}function hc(a){function b(){var a=Fa(A.value).join("\n");a!=f&&t(Aa)(a,"end");Oa.style.position="relative";A.style.cssText=e;Ga=!1;xa(!0);Va()}var g=Ca(a);if(g&&!window.opera){(K(c,d)||ea(g,c)||!ea(g,d))&&t(oa)(g.line,g.ch);var e=A.style.cssText;Oa.style.position=
"absolute";A.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(a.clientY-5)+"px; left: "+(a.clientX-5)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";Ga=!0;var f=A.value=Wa();sa();A.select();if(zb){Pa(a);var k=B(window,"mouseup",function(){k();setTimeout(b,20)},!0)}else setTimeout(b,50)}}function Kb(){clearInterval(jb);var a=!0;$.style.visibility="";jb=setInterval(function(){$.style.visibility=(a=!a)?
"":"hidden"},650)}function ic(a){function b(a,j,c){if(a.text)for(var g=a.styles,a=i?0:a.text.length-1,d,e=i?0:g.length-2,f=i?g.length:-2;e!=f;e+=2*m){var k=g[e];if(null!=g[e+1]&&g[e+1]!=u)a+=m*k.length;else for(var l=i?0:k.length-1,h=i?k.length:-1;l!=h;l+=m,a+=m)if(a>=j&&a<c&&D.test(d=k.charAt(l))){var ya=Ab[d];if(">"==ya.charAt(1)==i)s.push(d);else{if(s.pop()!=ya.charAt(0))return{pos:a,match:!1};if(!s.length)return{pos:a,match:!0}}}}}var g=e?c:d,f=k(g.line),h=g.ch-1,l=0<=h&&Ab[f.text.charAt(h)]||
Ab[f.text.charAt(++h)];if(l){l.charAt(0);for(var i=">"==l.charAt(1),m=i?1:-1,n=f.styles,p=h+1,l=0,F=n.length;l<F;l+=2)if(0>=(p-=n[l].length)){var u=n[l+1];break}for(var s=[f.text.charAt(h)],D=/[(){}[\]]/,l=g.line,F=i?Math.min(l+100,q.size):Math.max(-1,l-100);l!=F;l+=m){var f=k(l),o=l==g.line;if(o=b(f,o&&i?h+1:0,o&&!i?h:f.text.length))break}o||(o={pos:null,match:!1});var u=o.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",v=wb({line:g.line,ch:h},{line:g.line,ch:h+1},u),z=null!=o.pos&&
wb({line:l,ch:o.pos},{line:l,ch:o.pos+1},u),g=t(function(){v.clear();z&&z.clear()});a?setTimeout(g,800):ia=g}}function jc(a){for(var b,c,d=a,a=a-40;d>a;--d){if(0==d)return 0;var e=k(d-1);if(e.stateAfter)return d;e=e.indentation(l.tabSize);if(null==c||b>e)c=d-1,b=e}return c}function db(a){var b=jc(a),c=b&&k(b-1).stateAfter,c=c?r(G,c):w(G);q.iter(b,a,function(a){a.highlight(G,c,l.tabSize);a.stateAfter=r(G,c)});b<a&&X.push({from:b,to:a});a<q.size&&!k(a).stateAfter&&Z.push(a);return c}function qc(a,b){var c=
db(a);q.iter(a,b,function(a){a.highlight(G,c,l.tabSize);a.stateAfter=r(G,c)})}function xc(){for(var a=+new Date+l.workTime,b=Z.length;Z.length;){var c=k(M).stateAfter?Z.pop():M;if(!(c>=q.size)){var d=jc(c),e=d&&k(d-1).stateAfter,e=e?r(G,e):w(G),f=0,h=G.compareStates,i=!1,m=d,n=!1;q.iter(m,q.size,function(b){var d=b.stateAfter;if(+new Date>a)return Z.push(m),lb(l.workDelay),i&&X.push({from:c,to:m+1}),n=!0;var k=b.highlight(G,e,l.tabSize);k&&(i=!0);b.stateAfter=r(G,e);if(h){if(d&&h(d,e))return!0}else if(!1!==
k||!d)f=0;else if(3<++f&&(!G.indent||G.indent(d,"")==G.indent(e,"")))return!0;++m});if(n)return;i&&X.push({from:c,to:m+1})}}if(b&&l.onHighlightComplete)l.onHighlightComplete(C)}function lb(a){Z.length&&yc.set(a,t(xc))}function ob(){ha=Za=Ia=null;X=[];na=!1;Ha=[]}function pb(){var a=!1,b;na&&(a=!Da());X.length?b=ta(X,!0):(na&&Ub(),ba&&Tb());a&&Da();na&&(Ea(),Kb());V&&!Ga&&(!0===ha||!1!==ha&&na)&&xa(Za);na&&l.matchBrackets&&setTimeout(t(function(){ia&&(ia(),ia=null);K(c,d)&&ic(!1)}),20);var g=Ia,a=
Ha;if(na&&l.onCursorActivity)l.onCursorActivity(C);if(g&&l.onChange&&C)l.onChange(C,g);for(g=0;g<a.length;++g)a[g](C);if(b&&l.onUpdate)l.onUpdate(C)}function t(a){return function(){kc++||ob();try{var b=a.apply(this,arguments)}finally{--kc||pb()}return b}}var l={},Bb=i.defaults,Qa;for(Qa in Bb)Bb.hasOwnProperty(Qa)&&(l[Qa]=(b&&b.hasOwnProperty(Qa)?b:Bb)[Qa]);var ua=l.document,E=ua.createElement("div");E.className="CodeMirror"+(l.lineWrapping?" CodeMirror-wrap":"");E.innerHTML='<div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea style="position: absolute; padding: 0; width: 1px; height: 1em" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll" tabindex="-1"><div style="position: relative"><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative; z-index: 0"><div style="position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden; outline: 5px auto none"></div><pre class="CodeMirror-cursor">&#160;</pre><div style="position: relative; z-index: -1"></div><div></div></div></div></div></div></div>';
a.appendChild?a.appendChild(E):a(E);var Oa=E.firstChild,A=Oa.firstChild,s=E.lastChild,O=s.firstChild,Xa=O.firstChild,R=Xa.firstChild,Na=R.firstChild,y=R.nextSibling.firstChild,pa=y.firstChild,$=pa.nextSibling,Ya=$.nextSibling,Y=Ya.nextSibling;Zb();lc&&(A.style.width="0px");Cb||(y.draggable=!0);y.style.outline="none";null!=l.tabindex&&(A.tabIndex=l.tabindex);!l.gutter&&!l.lineNumbers&&(R.style.display="none");try{rb("x")}catch(Db){throw Db.message.match(/runtime/i)&&(Db=Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)")),
Db;}var nb=new Eb,yc=new Eb,jb,G,q=new u([new p([new n("")])]),Z,V;Xb();c={line:0,ch:0};d={line:0,ch:0};e=!1;var U,eb,Ra,Fb=0,Gb,qb=!1,Ua=!1,ha,Za,X,Ia,na,Ga,ba,Ha,Ma=0,M=0,S=0,Sb=0,ia,ja="",ka,sb=Yb();t(function(){o(l.value||"");ha=!1})();var W=new F;B(s,"mousedown",t(function(a){function b(a){var c=Ca(a,!0);if(c&&!K(c,f)){V||za();f=c;ma(e,c);ha=!1;var j=Rb();if(c.line>=j.to||c.line<j.from)k=setTimeout(t(function(){b(a)}),150)}}Vb(P(a,"shiftKey"));for(var g=a.target||a.srcElement;g!=E;g=g.parentNode)if(g.parentNode==
O&&g!=Xa)return;for(g=a.target||a.srcElement;g!=E;g=g.parentNode)if(g.parentNode==Na){if(l.onGutterClick)l.onGutterClick(C,Sa(Na.childNodes,g)+M,a);return N(a)}var e=Ca(a);switch(zc(a)){case 3:zb&&!Hb&&hc(a);return;case 2:e&&oa(e.line,e.ch,!0);return}if(e){V||za();g=+new Date;if(Ra&&Ra.time>g-400&&K(Ra.pos,e))return N(a),setTimeout(sa,20),uc(e.line);if(eb&&eb.time>g-400&&K(eb.pos,e))return Ra={time:g,pos:e},N(a),Wb(e);eb={time:g,pos:e};var f=e,k;if(mc&&!l.readOnly&&!K(c,d)&&!ea(e,c)&&!ea(d,e)){Cb&&
(y.draggable=!0);var h=B(ua,"mouseup",t(function(b){Cb&&(y.draggable=!1);Gb=!1;h();10>Math.abs(a.clientX-b.clientX)+Math.abs(a.clientY-b.clientY)&&(N(b),oa(e.line,e.ch,!0),sa())}),!0);Gb=!0}else{N(a);oa(e.line,e.ch,!0);var i=B(ua,"mousemove",t(function(a){clearTimeout(k);N(a);b(a)}),!0),h=B(ua,"mouseup",t(function(a){clearTimeout(k);var b=Ca(a);b&&ma(e,b);N(a);sa();ha=!0;i();h()}),!0)}}else(a.target||a.srcElement)==s&&N(a)}));B(s,"dblclick",t(function(a){for(var b=a.target||a.srcElement;b!=E;b=b.parentNode)if(b.parentNode==
Na)return N(a);if(b=Ca(a))Ra={time:+new Date,pos:b},N(a),Wb(b)}));B(y,"dragstart",function(a){var b=Wa();aa(b);a.dataTransfer.setDragImage(qa,0,0);a.dataTransfer.setData("Text",b)});B(y,"selectstart",N);zb||B(s,"contextmenu",hc);B(s,"scroll",function(){Fb=s.scrollTop;ta([]);l.fixedGutter&&(R.style.left=s.scrollLeft+"px");if(l.onScroll)l.onScroll(C)});B(window,"resize",function(){ta(!0)});B(A,"keyup",t(function(a){if(!l.onKeyEvent||!l.onKeyEvent(C,Ib(a)))16==P(a,"keyCode")&&(U=null)}));B(A,"input",
Ka);B(A,"keydown",t(function(a){V||za();La&&27==a.keyCode&&(a.returnValue=!1);if(!l.onKeyEvent||!l.onKeyEvent(C,Ib(a))){var b=P(a,"keyCode");Vb(16==b||P(a,"shiftKey"));var c=fa(a);window.opera&&(Jb=c?b:null,!c&&88==b&&P(a,Hb?"metaKey":"ctrlKey")&&Aa(""))}}));B(A,"keypress",t(function(a){var b=P(a,"keyCode"),c=P(a,"charCode");window.opera&&b==Jb?(Jb=null,N(a)):l.onKeyEvent&&l.onKeyEvent(C,Ib(a))||window.opera&&!a.which&&fa(a)||(l.electricChars&&G.electricChars&&l.smartIndent&&!l.readOnly&&(a=String.fromCharCode(null==
c?b:c),-1<G.electricChars.indexOf(a)&&setTimeout(t(function(){cb(d.line,"smart")}),75)),Ka())}));B(A,"focus",za);B(A,"blur",ib);B(s,"dragenter",Pa);B(s,"dragover",Pa);B(s,"drop",t(function(a){a.preventDefault();var b=Ca(a,!0),e=a.dataTransfer.files;if(b&&!l.readOnly)if(e&&e.length&&window.FileReader&&window.File)for(var a=function(a,c){var j=new FileReader;j.onload=function(){k[c]=j.result;++h==f&&(b=I(b),t(function(){var a=da(k.join(""),b,b);ma(b,a)})())};j.readAsText(a)},f=e.length,k=Array(f),h=
0,i=0;i<f;++i)a(e[i],i);else try{if(k=a.dataTransfer.getData("Text"))e=c,a=d,ma(b,b),Gb&&da("",e,a),Aa(k),sa()}catch(m){}}));B(s,"paste",function(){sa();Ka()});B(A,"paste",Ka);B(A,"cut",t(function(){l.readOnly||Aa("")}));var nc;try{nc=ua.activeElement==A}catch(Ac){}nc?setTimeout(za,20):ib();var C=E.CodeMirror={getValue:function(){var a=[];q.iter(0,q.size,function(b){a.push(b.text)});return a.join("\n")},setValue:t(o),getSelection:Wa,replaceSelection:t(Aa),focus:function(){sa();za();Ka()},setOption:function(a,
b){var c=l[a];l[a]=b;"mode"==a||"indentUnit"==a?Xb():"readOnly"==a&&"nocursor"==b?(ib(),A.blur()):"readOnly"==a&&!b?xa(!0):"theme"==a?Zb():"lineWrapping"==a&&c!=b?t(vc)():"tabSize"==a&&t(wc)();("lineNumbers"==a||"gutter"==a||"firstLineNumber"==a||"theme"==a)&&ta(!0)},getOption:function(a){return l[a]},undo:t(function(){Mb(W.done,W.undone,-1)}),redo:t(function(){Mb(W.undone,W.done,1)}),indentLine:t(function(a,b){"string"!=typeof b&&(b=null==b?l.smartIndent?"smart":"prev":b?"add":"subtract");f(a)&&
cb(a,b)}),indentSelection:t(function(a){if(K(c,d))return cb(c.line,a);for(var b=d.line-(d.ch?0:1),e=c.line;e<=b;++e)cb(e,a)}),historySize:function(){return{undo:W.done.length,redo:W.undone.length}},clearHistory:function(){W=new F},matchBrackets:t(function(){ic(!0)}),getTokenAt:t(function(a){a=I(a);return k(a.line).getTokenAt(G,db(a.line),a.ch)}),getStateAfter:function(a){a=bb(null==a?q.size-1:a);return db(a+1)},cursorCoords:function(a){null==a&&(a=e);return dc(a?c:d)},charCoords:function(a){return dc(I(a))},
coordsChar:function(a){var b=va(y);return xb(a.x-b.left,a.y-b.top)},markText:t(wb),setBookmark:function(a){var a=I(a),b=new v(a.ch);k(a.line).addMark(b);return b},setMarker:t(function(a,b,c){"number"==typeof a&&(a=k(bb(a)));a.gutterMarker={text:b,style:c};ba=!0;return a}),clearMarker:t(function(a){"number"==typeof a&&(a=k(bb(a)));a.gutterMarker=null;ba=!0}),setLineClass:t(function(a,b){return $b(a,function(a){if(a.className!=b)return a.className=b,!0})}),hideLine:t(function(a){return ac(a,!0)}),showLine:t(function(a){return ac(a,
!1)}),onDeleteLine:function(a,b){if("number"==typeof a){if(!f(a))return null;a=k(a)}(a.handlers||(a.handlers=[])).push(b);return a},lineInfo:function(a){if("number"==typeof a){if(!f(a))return null;var b=a,a=k(a);if(!a)return null}else if(b=D(a),null==b)return null;var c=a.gutterMarker;return{line:b,handle:a,text:a.text,markerText:c&&c.text,markerClass:c&&c.style,lineClass:a.className}},addWidget:function(a,b,c,d,e){var a=Ba(I(a)),f=a.yBot,k=a.x;b.style.position="absolute";O.appendChild(b);if("over"==
d)f=a.y;else if("near"==d){var d=Math.max(s.offsetHeight,q.height*ca()),h=Math.max(O.clientWidth,y.clientWidth)-y.offsetLeft;a.yBot+b.offsetHeight>d&&a.y>b.offsetHeight&&(f=a.y-b.offsetHeight);k+b.offsetWidth>h&&(k=h-b.offsetWidth)}b.style.top=f+y.offsetTop+"px";b.style.left=b.style.right="";"right"==e?(k=O.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?k=0:"middle"==e&&(k=(O.clientWidth-b.offsetWidth)/2),b.style.left=k+y.offsetLeft+"px");c&&Qb(k,f,k+b.offsetWidth,f+b.offsetHeight)},lineCount:function(){return q.size},
clipPos:I,getCursor:function(a){null==a&&(a=e);return{line:(a?c:d).line,ch:(a?c:d).ch}},somethingSelected:function(){return!K(c,d)},setCursor:t(function(a,b,c){null==b&&"number"==typeof a.line?oa(a.line,a.ch,c):oa(a,b,c)}),setSelection:t(function(a,b,c){(c?ma:Ja)(I(a),I(b||a))}),getLine:function(a){if(f(a))return k(a).text},getLineHandle:function(a){if(f(a))return k(a)},setLine:t(function(a,b){f(a)&&da(b,{line:a,ch:0},{line:a,ch:k(a).text.length})}),removeLine:t(function(a){f(a)&&da("",{line:a,ch:0},
I({line:a+1,ch:0}))}),replaceRange:t(da),getRange:function(a,b){return Ob(I(a),I(b))},execCommand:function(a){return hb[a](C)},moveH:t(function(a,b){var e=0>a?c:d;if(U||K(c,d))e=tb(a,b);oa(e.line,e.ch,!0)}),deleteH:t(function(a,b){K(c,d)?0>a?da("",tb(a,b),d):da("",c,tb(a,b)):da("",c,d);Za=!0}),moveV:t(function(a,b){var g=0,f=Ba(e?c:d,!0);null!=$a&&(f.x=$a);"page"==b?g=Math.min(s.clientHeight,window.innerHeight||document.documentElement.clientHeight):"line"==b&&(g=ca());g=xb(f.x,f.y+g*a+2);oa(g.line,
g.ch,!0);$a=f.x}),toggleOverwrite:function(){qb=!qb},posFromIndex:function(a){var b=0,c;q.iter(0,q.size,function(d){d=d.text.length+1;if(d>a)return c=a,!0;a-=d;++b});return I({line:b,ch:c})},indexFromPos:function(a){if(0>a.line||0>a.ch)return 0;var b=a.ch;q.iter(0,a.line,function(a){b+=a.text.length+1});return b},scrollTo:function(a,b){null!=a&&(s.scrollTop=a);null!=b&&(s.scrollLeft=b);ta([])},operation:function(a){return t(a)()},refresh:function(){ta(!0);s.scrollHeight>Fb&&(s.scrollTop=Fb)},getInputField:function(){return A},
getWrapperElement:function(){return E},getScrollerElement:function(){return s},getGutterElement:function(){return R}},Jb=null,mb=!1,la="",$a=null;vb.prototype.clear=t(function(){for(var a=Infinity,b=-Infinity,c=0,d=this.set.length;c<d;++c){var e=this.set[c],f=e.marked;if(f&&e.parent){e=D(e);a=Math.min(a,e);b=Math.max(b,e);for(e=0;e<f.length;++e)f[e].set==this.set&&f.splice(e--,1)}}Infinity!=a&&X.push({from:a,to:b+1})});vb.prototype.find=function(){for(var a,b,c=0,e=this.set.length;c<e;++c)for(var d=
this.set[c],f=d.marked,k=0;k<f.length;++k){var h=f[k];if(h.set==this.set&&(null!=h.from||null!=h.to)){var l=D(d);null!=l&&(null!=h.from&&(a={line:l,ch:h.from}),null!=h.to&&(b={line:l,ch:h.to}))}}return{from:a,to:b}};var cc=Math.floor(16777215*Math.random()).toString(16),yb,ec,wa,gc,fc=0,Ab={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},kc=0,Ta;for(Ta in fb)fb.propertyIsEnumerable(Ta)&&!C.propertyIsEnumerable(Ta)&&(C[Ta]=fb[Ta]);return C}function L(a,b,c){function d(a,b,c){var h=b[a];if(null!=
h)return h;null==c&&(c=b.fallthrough);if(null==c)return b.catchall;if("string"==typeof c)return d(a,T[c]);for(var b=0,i=c.length;b<i;++b)if(h=d(a,T[c[b]]),null!=h)return h;return null}return b?d(a,b,c):d(a,T[c])}function r(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={},d;for(d in b){var e=b[d];e instanceof Array&&(e=e.concat([]));c[d]=e}return c}function w(a,b,c){return a.startState?a.startState(b,c):!0}function o(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8}function x(a,
b,c,d){this.from=a;this.to=b;this.style=c;this.set=d}function v(a){this.to=this.from=a;this.line=null}function n(a,b){this.styles=b||[a,null];this.text=a;this.height=1;this.stateAfter=this.parent=this.hidden=this.marked=this.gutterMarker=this.className=this.handlers=null}function m(a,b,c,d){for(var e=0,f=0,k=0;f<b;e+=2){var h=c[e],i=f+h.length;0==k?(i>a&&d.push(h.slice(a-f,Math.min(h.length,b-f)),c[e+1]),i>=a&&(k=1)):1==k&&(i>b?d.push(h.slice(0,b-f),c[e+1]):d.push(h,c[e+1]));f=i}}function p(a){this.lines=
a;this.parent=null;for(var b=0,c=a.length,d=0;b<c;++b)a[b].parent=this,d+=a[b].height;this.height=d}function u(a){this.children=a;for(var b=0,c=0,d=0,e=a.length;d<e;++d){var f=a[d],b=b+f.chunkSize(),c=c+f.height;f.parent=this}this.size=b;this.height=c;this.parent=null}function D(a){if(null==a.parent)return null;for(var b=a.parent,a=Sa(b.lines,a),c=b.parent;c;b=c,c=c.parent)for(var d=0;!(c.children[d]==b);++d)a+=c.children[d].chunkSize();return a}function h(a,b){var c=0;a:do{for(var d=0,e=a.children.length;d<
e;++d){var f=a.children[d],k=f.height;if(b<k){a=f;continue a}b-=k;c+=f.chunkSize()}return c}while(!a.lines);d=0;for(e=a.lines.length;d<e;++d){f=a.lines[d].height;if(b<f)break;b-=f}return c+d}function z(a,b){var c=0;a:do{for(var d=0,e=a.children.length;d<e;++d){var f=a.children[d],k=f.chunkSize();if(b<k){a=f;continue a}b-=k;c+=f.height}return c}while(!a.lines);for(d=0;d<b;++d)c+=a.lines[d].height;return c}function F(){this.time=0;this.done=[];this.undone=[]}function fa(){Pa(this)}function Ib(a){a.stop||
(a.stop=fa);return a}function N(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function xa(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function Pa(a){N(a);xa(a)}function zc(a){if(a.which)return a.which;if(a.button&1)return 1;if(a.button&2)return 3;if(a.button&4)return 2}function P(a,b){return a.override&&a.override.hasOwnProperty(b)?a.override[b]:a[b]}function B(a,b,c,d){if("function"==typeof a.addEventListener){if(a.addEventListener(b,c,!1),d)return function(){a.removeEventListener(b,
c,!1)}}else{var e=function(a){c(a||window.event)};a.attachEvent("on"+b,e);if(d)return function(){a.detachEvent("on"+b,e)}}}function Eb(){this.id=null}function Da(a,b,c){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));for(var d=0,e=0;d<b;++d)"\t"==a.charAt(d)?e+=c-e%c:++e;return e}function va(a,b){for(var c=a.ownerDocument.body,d=0,e=0,f=!1,k=a;k;k=k.offsetParent){var h=k.offsetLeft,i=k.offsetTop;k==c?(d+=Math.abs(h),e+=Math.abs(i)):(d+=h,e+=i);b&&"fixed"==(k.currentStyle?k.currentStyle:window.getComputedStyle(k,
null)).position&&(f=!0)}c=b&&!f?null:c;for(k=a.parentNode;k!=c;k=k.parentNode)null!=k.scrollLeft&&(d-=k.scrollLeft,e-=k.scrollTop);return{left:d,top:e}}function K(a,b){return a.line==b.line&&a.ch==b.ch}function ea(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function aa(a){qa.textContent=a;return qa.innerHTML}function pc(a,b){if(!b)return 0;if(!a)return b.length;for(var c=a.length,d=b.length;0<=c&&0<=d&&!(a.charAt(c)!=b.charAt(d));--c,--d);return d+1}function Sa(a,b){if(a.indexOf)return a.indexOf(b);
for(var c=0,d=a.length;c<d;++c)if(a[c]==b)return c;return-1}function ub(a){return/\w/.test(a)||a.toUpperCase()!=a.toLowerCase()}i.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,smartIndent:!0,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,onKeyEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,readOnly:!1,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,onUpdate:null,onFocus:null,onBlur:null,
onScroll:null,matchBrackets:!1,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,document:window.document};var lc=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Hb=lc||/Mac/.test(navigator.platform);/Win/.test(navigator.platform);var Ea={},ga={};i.defineMode=function(a,b){!i.defaults.mode&&"null"!=a&&(i.defaults.mode=a);Ea[a]=b};i.defineMIME=function(a,b){ga[a]=b};i.getMode=function(a,b){"string"==typeof b&&ga.hasOwnProperty(b)&&(b=ga[b]);if("string"==
typeof b)var c=b,d={};else null!=b&&(c=b.name,d=b);var e=Ea[c];return!e?(window.console&&console.warn("No mode "+c+" found, falling back to plain text."),i.getMode(a,"text/plain")):e(a,d||{})};i.listModes=function(){var a=[],b;for(b in Ea)Ea.propertyIsEnumerable(b)&&a.push(b);return a};i.listMIMEs=function(){var a=[],b;for(b in ga)ga.propertyIsEnumerable(b)&&a.push({mime:b,mode:ga[b]});return a};var fb=i.extensions={};i.defineExtension=function(a,b){fb[a]=b};var hb=i.commands={selectAll:function(a){a.setSelection({line:0,
ch:0},{line:a.lineCount()-1})},killLine:function(a){var b=a.getCursor(!0),c=a.getCursor(!1),d=!K(b,c);!d&&a.getLine(b.line).length==b.ch?a.replaceRange("",b,{line:b.line+1,ch:0}):a.replaceRange("",b,d?c:{line:b.line})},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",{line:b,ch:0},{line:b})},undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.setCursor(0,0,!0)},goDocEnd:function(a){a.setSelection({line:a.lineCount()-1},null,!0)},goLineStart:function(a){a.setCursor(a.getCursor().line,
0,!0)},goLineStartSmart:function(a){var b=a.getCursor(),c=a.getLine(b.line),c=Math.max(0,c.search(/\S/));a.setCursor(b.line,b.ch<=c&&b.ch?0:c,!0)},goLineEnd:function(a){a.setSelection({line:a.getCursor().line},null,!0)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,
"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goWordRight:function(a){a.moveH(1,"word")},delCharLeft:function(a){a.deleteH(-1,"char")},delCharRight:function(a){a.deleteH(1,"char")},delWordLeft:function(a){a.deleteH(-1,"word")},delWordRight:function(a){a.deleteH(1,"word")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t",
"end")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);0<b.ch&&b.ch<c.length-1&&a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),{line:b.line,ch:b.ch-1},{line:b.line,ch:b.ch+1})},newlineAndIndent:function(a){a.replaceSelection("\n","end");a.indentLine(a.getCursor().line)},toggleOverwrite:function(a){a.toggleOverwrite()}},T=i.keyMap={};T.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",
Delete:"delCharRight",Backspace:"delCharLeft",Tab:"indentMore","Shift-Tab":"indentLess",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};T.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight",
"Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll",fallthrough:"basic"};T.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight",
"Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll",fallthrough:["basic","emacsy"]};T["default"]=Hb?T.macDefault:T.pcDefault;T.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight",
"Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};i.fromTextArea=function(a,b){function c(){a.value=k.getValue()}b||(b={});b.value=a.value;!b.tabindex&&a.tabindex&&(b.tabindex=a.tabindex);if(a.form){var d=B(a.form,"submit",c,!0);if("function"==typeof a.form.submit){var e=a.form.submit,f=function(){c();a.form.submit=e;a.form.submit();a.form.submit=f};a.form.submit=f}}a.style.display="none";var k=i(function(b){a.parentNode.insertBefore(b,a.nextSibling)},b);k.save=c;k.getTextArea=
function(){return a};k.toTextArea=function(){c();a.parentNode.removeChild(k.getWrapperElement());a.style.display="";a.form&&(d(),"function"==typeof a.form.submit&&(a.form.submit=e))};return k};i.copyState=r;i.startState=w;o.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);
if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0},backUp:function(a){this.pos-=a},column:function(){return Da(this.string,this.start,this.tabSize)},indentation:function(){return Da(this.string,
null,this.tabSize)},match:function(a,b,c){if("string"==typeof a){if((c?this.string.toLowerCase():this.string).indexOf(c?a.toLowerCase():a,this.pos)==this.pos)return!1!==b&&(this.pos+=a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&!1!==b)this.pos+=a[0].length;return a}},current:function(){return this.string.slice(this.start,this.pos)}};i.StringStream=o;x.prototype={attach:function(a){this.set.push(a)},detach:function(a){a=Sa(this.set,a);-1<a&&this.set.splice(a,1)},split:function(a,
b){return this.to<=a&&null!=this.to?null:new x(this.from<a||null==this.from?null:this.from-a+b,null==this.to?null:this.to-a+b,this.style,this.set)},dup:function(){return new x(null,null,this.style,this.set)},clipTo:function(a,b,c,d,e){null!=this.from&&this.from>=b&&(this.from=Math.max(d,this.from)+e);null!=this.to&&this.to>b&&(this.to=d<this.to?this.to+e:b);if(a&&d>this.from&&(d<this.to||null==this.to))this.from=null;if(c&&(b<this.to||null==this.to)&&(b>this.from||null==this.from))this.to=null},isDead:function(){return null!=
this.from&&null!=this.to&&this.from>=this.to},sameSet:function(a){return this.set==a.set}};v.prototype={attach:function(a){this.line=a},detach:function(a){this.line==a&&(this.line=null)},split:function(a,b){if(a<this.from)return this.from=this.to=this.from-a+b,this},isDead:function(){return this.from>this.to},clipTo:function(a,b,c,d,e){(a||b<this.from)&&(c||d>this.to)?(this.from=0,this.to=-1):this.from>b&&(this.from=this.to=Math.max(d,this.from)+e)},sameSet:function(){return!1},find:function(){return!this.line||
!this.line.parent?null:{line:D(this.line),ch:this.from}},clear:function(){if(this.line){var a=Sa(this.line.marked,this);-1!=a&&this.line.marked.splice(a,1);this.line=null}}};n.inheritMarks=function(a,b){var c=new n(a),d=b&&b.marked;if(d)for(var e=0;e<d.length;++e)if(null==d[e].to&&d[e].style){var f=c.marked||(c.marked=[]),k=d[e].dup();f.push(k);k.attach(c)}return c};n.prototype={replace:function(a,b,c){var d=[],e=this.marked,f=null==b?this.text.length:b;m(0,a,this.styles,d);c&&d.push(c,null);m(f,
this.text.length,this.styles,d);this.styles=d;this.text=this.text.slice(0,a)+c+this.text.slice(f);this.stateAfter=null;if(e){c=c.length-(f-a);for(d=0;d<e.length;++d){var k=e[d];k.clipTo(null==a,a||0,null==b,f,c);k.isDead()&&(k.detach(this),e.splice(d--,1))}}},split:function(a,b){var c=[b,null],d=this.marked;m(a,this.text.length,this.styles,c);c=new n(b+this.text.slice(a),c);if(d)for(var e=0;e<d.length;++e){var f=d[e].split(a,b.length);f&&(c.marked||(c.marked=[]),c.marked.push(f),f.attach(c))}return c},
append:function(a){var b=this.text.length,c=a.marked,d=this.marked;this.text+=a.text;m(0,a.text.length,a.styles,this.styles);if(d)for(a=0;a<d.length;++a)null==d[a].to&&(d[a].to=b);if(c&&c.length){d||(this.marked=d=[]);a=0;a:for(;a<c.length;++a){var e=c[a];if(!e.from)for(var f=0;f<d.length;++f){var k=d[f];if(k.to==b&&k.sameSet(e)){k.to=null==e.to?null:e.to+b;k.isDead()&&(k.detach(this),c.splice(a--,1));continue a}}d.push(e);e.attach(this);e.from+=b;null!=e.to&&(e.to+=b)}}},fixMarkEnds:function(a){var b=
this.marked,a=a.marked;if(b)for(var c=0;c<b.length;++c){var d=b[c],e=null==d.to;if(e&&a)for(var f=0;f<a.length;++f)if(a[f].sameSet(d)){e=!1;break}e&&(d.to=this.text.length)}},fixMarkStarts:function(){var a=this.marked;if(a)for(var b=0;b<a.length;++b)null==a[b].from&&(a[b].from=0)},addMark:function(a){a.attach(this);null==this.marked&&(this.marked=[]);this.marked.push(a);this.marked.sort(function(a,c){return(a.from||0)-(c.from||0)})},highlight:function(a,b,c){var c=new o(this.text,c),d=this.styles,
e=0,f=!1,k=d[0],h;for(""==this.text&&a.blankLine&&a.blankLine(b);!c.eol();){var i=a.token(c,b),m=this.text.slice(c.start,c.pos);c.start=c.pos;if(e&&d[e-1]==i)d[e-2]+=m;else if(m){if(!f&&(d[e+1]!=i||e&&d[e-2]!=h))f=!0;d[e++]=m;d[e++]=i;h=k;k=d[e]}if(5E3<c.pos){d[e++]=this.text.slice(c.pos);d[e++]=null;break}}d.length!=e&&(d.length=e,f=!0);e&&d[e-2]!=h&&(f=!0);return f||(5>d.length&&10>this.text.length?null:!1)},getTokenAt:function(a,b,c){for(var d=new o(this.text);d.pos<c&&!d.eol();){d.start=d.pos;
var e=a.token(d,b)}return{start:d.start,end:d.pos,string:d.current(),className:e||null,state:b}},indentation:function(a){return Da(this.text,null,a)},getHTML:function(a,b){function c(b,c){b&&(f&&La&&" "==b.charAt(0)&&(b="\u00a0"+b.slice(1)),f=!1,c?e.push('<span class="',c,'">',aa(b).replace(/\t/g,a),"</span>"):e.push(aa(b).replace(/\t/g,a)))}function d(a){return!a?null:"cm-"+a.replace(/ +/g," cm-")}var e=[],f=!0,k=this.styles,h=this.text,i=this.marked,m=h.length;null!=b&&(m=Math.min(b,m));if(!h&&
null==b)c(" ");else if(!i||!i.length)for(var n=h=0;n<m;h+=2){var p=k[h],F=k[h+1],u=p.length;n+u>m&&(p=p.slice(0,m-n));n+=u;c(p,d(F))}else for(var o=0,h=0,n="",D=i[0].from||0,z=[],v=0,p=function(){for(var a;v<i.length&&((a=i[v]).from==o||null==a.from);)null!=a.style&&z.push(a),++v;D=v<i.length?i[v].from:Infinity;for(a=0;a<z.length;++a){var b=z[a].to||Infinity;b==o?z.splice(a--,1):D=Math.min(b,D)}};o<m;){D==o&&p();for(u=Math.min(m,D);;){if(n){for(var r=o+n.length,fa=F,w=0;w<z.length;++w)fa=(fa?fa+" ":
"")+z[w].style;c(r>u?n.slice(0,u-o):n,fa);if(r>=u){n=n.slice(u-o);o=u;break}o=r}n=k[h++];F=d(k[h++])}}return e.join("")},cleanUp:function(){this.parent=null;if(this.marked)for(var a=0,b=this.marked.length;a<b;++a)this.marked[a].detach(this)}};p.prototype={chunkSize:function(){return this.lines.length},remove:function(a,b,c){for(var d=a,e=a+b;d<e;++d){var f=this.lines[d];this.height-=f.height;f.cleanUp();if(f.handlers)for(var h=0;h<f.handlers.length;++h)c.push(f.handlers[h])}this.lines.splice(a,b)},
collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertHeight:function(a,b,c){this.height+=c;this.lines.splice.apply(this.lines,[a,0].concat(b));a=0;for(c=b.length;a<c;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};u.prototype={chunkSize:function(){return this.size},remove:function(a,b,c){this.size-=b;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<f){var h=Math.min(b,f-a),i=e.height;e.remove(a,
h,c);this.height-=i-e.height;f==h&&(this.children.splice(d--,1),e.parent=null);if(0==(b-=h))break;a=0}else a-=f}25>this.size-b&&(a=[],this.collapse(a),this.children=[new p(a)],this.children[0].parent=this)},collapse:function(a){for(var b=0,c=this.children.length;b<c;++b)this.children[b].collapse(a)},insert:function(a,b){for(var c=0,d=0,e=b.length;d<e;++d)c+=b[d].height;this.insertHeight(a,b,c)},insertHeight:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0,e=this.children.length;d<e;++d){var f=
this.children[d],h=f.chunkSize();if(a<=h){f.insertHeight(a,b,c);if(f.lines&&50<f.lines.length){for(;50<f.lines.length;)a=f.lines.splice(f.lines.length-25,25),a=new p(a),f.height-=a.height,this.children.splice(d+1,0,a),a.parent=this;this.maybeSpill()}break}a-=h}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5),b=new u(b);if(a.parent){a.size-=b.size;a.height-=b.height;var c=Sa(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=
new u(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iter:function(a,b,c){this.iterN(a,b-a,c)},iterN:function(a,b,c){for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],h=f.chunkSize();if(a<h){h=Math.min(b,h-a);if(f.iterN(a,h,c))return!0;if(0==(b-=h))break;a=0}else a-=h}}};F.prototype={addChange:function(a,b,c){this.undone.length=0;var d=+new Date,e=this.done[this.done.length-1],f=e&&e[e.length-1];if(400<d-this.time||
!f)this.done.push([{start:a,added:b,old:c}]);else if(f.start>a+b||f.start+f.added<a-f.added+f.old.length)e.push({start:a,added:b,old:c});else{var h=0;if(a<f.start){for(e=f.start-a-1;0<=e;--e)f.old.unshift(c[e]);f.added+=f.start-a;f.start=a}else f.start<a&&(h=a-f.start,b+=h);e=f.added-h;for(a=c.length;e<a;++e)f.old.push(c[e]);f.added<b&&(f.added=b)}this.time=d}};i.e_stop=Pa;i.e_preventDefault=N;i.e_stopPropagation=xa;i.connect=B;Eb.prototype={set:function(a,b){clearTimeout(this.id);this.id=setTimeout(b,
a)}};var mc;mc=/MSIE [1-8]\b/.test(navigator.userAgent)?!1:"draggable"in document.createElement("div");var zb=/gecko\/\d{7}/i.test(navigator.userAgent),La=/MSIE \d/.test(navigator.userAgent),Cb=/WebKit\//.test(navigator.userAgent);(function(){var a=document.createElement("textarea");a.value="foo\nbar";a.value.indexOf("\r")})();null!=document.documentElement.getBoundingClientRect&&(va=function(a,b){try{var c=a.getBoundingClientRect(),c={top:c.top,left:c.left}}catch(d){c={top:0,left:0}}if(!b)if(null==
window.pageYOffset){var e=document.documentElement||document.body.parentNode;null==e.scrollTop&&(e=document.body);c.top+=e.scrollTop;c.left+=e.scrollLeft}else c.top+=window.pageYOffset,c.left+=window.pageXOffset;return c});var qa=document.createElement("pre");"\na"==aa("a")?aa=function(a){qa.textContent=a;return qa.innerHTML.slice(1)}:"\t"!=aa("\t")&&(aa=function(a){qa.innerHTML="";qa.appendChild(document.createTextNode(a));return qa.innerHTML});i.htmlEscape=aa;var Fa=3!="\n\nb".split(/\n/).length?
function(a){for(var b=0,c,d=[];-1<(c=a.indexOf("\n",b));)d.push(a.slice(b,"\r"==a.charAt(c-1)?c-1:c)),b=c+1;d.push(a.slice(b));return d}:function(a){return a.split(/\r?\n/)};i.splitLines=Fa;var rc=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return!b||b.parentElement()!=a?!1:0!=b.compareEndPoints("StartToEnd",b)};i.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});
i.defineMIME("text/plain","null");var ra={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",
63233:"Down",63302:"Insert",63272:"Delete"};i.keyNames=ra;(function(){for(var a=0;10>a;a++)ra[a+48]=""+a;for(a=65;90>=a;a++)ra[a]=String.fromCharCode(a);for(a=1;12>=a;a++)ra[a+111]=ra[a+63235]="F"+a})();return i}();(function(){function i(i,r){var w=i.getWrapperElement(),w=w.insertBefore(document.createElement("div"),w.firstChild);w.className="CodeMirror-dialog";w.innerHTML="<div>"+r+"</div>";return w}CodeMirror.defineExtension("openDialog",function(L,r){function w(){x||(x=!0,o.parentNode.removeChild(o))}var o=i(this,L),x=!1,v=this,n=o.getElementsByTagName("input")[0];n&&(CodeMirror.connect(n,"keydown",function(i){if(13==i.keyCode||27==i.keyCode)CodeMirror.e_stop(i),w(),v.focus(),13==i.keyCode&&r(n.value)}),
n.focus(),CodeMirror.connect(n,"blur",w));return w});CodeMirror.defineExtension("openConfirm",function(L,r){function w(){v||(v=!0,o.parentNode.removeChild(o),n.focus())}var o=i(this,L),x=o.getElementsByTagName("button"),v=!1,n=this,m=1;x[0].focus();for(var p=0;p<x.length;++p){var u=x[p];(function(i){CodeMirror.connect(u,"click",function(h){CodeMirror.e_preventDefault(h);w();i&&i(n)})})(r[p]);CodeMirror.connect(u,"blur",function(){--m;setTimeout(function(){0>=m&&w()},200)});CodeMirror.connect(u,"focus",
function(){++m})}})})();(function(){function i(i,r,w,o){this.atOccurrence=!1;this.cm=i;null==o&&(o="string"==typeof r&&r==r.toLowerCase());w=w?i.clipPos(w):{line:0,ch:0};this.pos={from:w,to:w};if("string"!=typeof r)this.matches=function(n,m){if(n)for(var p=i.getLine(m.line).slice(0,m.ch),u=p.match(r),o=0;u;){var h=p.indexOf(u[0]),o=o+h,p=p.slice(h+1);if(h=p.match(r))u=h;else break;o++}else p=i.getLine(m.line).slice(m.ch),o=(u=p.match(r))&&m.ch+p.indexOf(u[0]);if(u)return{from:{line:m.line,ch:o},to:{line:m.line,ch:o+u[0].length},
match:u}};else{o&&(r=r.toLowerCase());var x=o?function(i){return i.toLowerCase()}:function(i){return i},v=r.split("\n");this.matches=1==v.length?function(n,m){var p=x(i.getLine(m.line)),o=r.length,v;if(n?m.ch>=o&&-1!=(v=p.lastIndexOf(r,m.ch-o)):-1!=(v=p.indexOf(r,m.ch)))return{from:{line:m.line,ch:v},to:{line:m.line,ch:v+o}}}:function(n,m){var p=m.line,o=n?v.length-1:0,r=v[o],h=x(i.getLine(p)),z=n?h.indexOf(r)+r.length:h.lastIndexOf(r);if(!(n?z>=m.ch||z!=r.length:z<=m.ch||z!=h.length-r.length))for(;!(n?
!p:p==i.lineCount()-1);){h=x(i.getLine(p+=n?-1:1));r=v[n?--o:++o];if(0<o&&o<v.length-1)if(h!=r)break;else continue;o=n?h.lastIndexOf(r):h.indexOf(r)+r.length;if(n?o!=h.length-r.length:o!=r.length)break;r={line:m.line,ch:z};p={line:p,ch:o};return{from:n?p:r,to:n?r:p}}}}}i.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(i){function r(i){i={line:i,ch:0};w.pos={from:i,to:i};return w.atOccurrence=!1}for(var w=this,o=this.cm.clipPos(i?this.pos.from:
this.pos.to);;){if(this.pos=this.matches(i,o))return this.atOccurrence=!0,this.pos.match||!0;if(i){if(!o.line)return r(0);o={line:o.line-1,ch:this.cm.getLine(o.line-1).length}}else{var x=this.cm.lineCount();if(o.line==x-1)return r(x);o={line:o.line+1,ch:0}}}},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(i){this.atOccurrence&&(this.pos.to=this.cm.replaceRange(i,this.pos.from,this.pos.to))}};CodeMirror.defineExtension("getSearchCursor",
function(L,r,w){return new i(this,L,r,w)})})();(function(){function i(){this.posFrom=this.posTo=this.query=null;this.marked=[]}function L(h,i,m,n){h.openDialog?h.openDialog(i,n):n(prompt(m,""))}function r(h,i,m,n){if(h.openConfirm)h.openConfirm(i,n);else if(confirm(m))n[0]()}function w(h){var i=h.match(/^\/(.*)\/$/);return i?RegExp(i[1]):h}function o(h,n){var o=h._searchState||(h._searchState=new i);if(o.query)return x(h,n);L(h,m,"Search for:",function(i){h.operation(function(){if(i&&!o.query){o.query=w(i);if(2E3>h.lineCount())for(var m=h.getSearchCursor(i);m.findNext();)o.marked.push(h.markText(m.from(),
m.to(),"CodeMirror-searching"));o.posFrom=o.posTo=h.getCursor();x(h,n)}})})}function x(h,m){h.operation(function(){var n=h._searchState||(h._searchState=new i),o=h.getSearchCursor(n.query,m?n.posFrom:n.posTo);if(!o.find(m)&&(o=h.getSearchCursor(n.query,m?{line:h.lineCount()-1}:{line:0,ch:0}),!o.find(m)))return;h.setSelection(o.from(),o.to());n.posFrom=o.from();n.posTo=o.to()})}function v(h){h.operation(function(){var m=h._searchState||(h._searchState=new i);if(m.query){m.query=null;for(var n=0;n<
m.marked.length;++n)m.marked[n].clear();m.marked.length=0}})}function n(h,i){L(h,p,"Replace:",function(m){m&&(m=w(m),L(h,u,"Replace with:",function(n){if(i)h.operation(function(){for(var i=h.getSearchCursor(m);i.findNext();)if("string"!=typeof m){var o=h.getRange(i.from(),i.to()).match(m);i.replace(n.replace(/\$(\d)/,function(h,i){return o[i]}))}else i.replace(n)});else{v(h);var o=h.getSearchCursor(m,h.getCursor()),p=function(){var i=o.from(),n;if(!(n=o.findNext()))if(o=h.getSearchCursor(m),!(n=o.findNext())||
o.from().line==i.line&&o.from().ch==i.ch)return;h.setSelection(o.from(),o.to());r(h,D,"Replace?",[function(){u(n)},p])},u=function(h){o.replace("string"==typeof m?n:n.replace(/\$(\d)/,function(i,m){return h[m]}));p()};p()}}))})}var m='Search: <input type="text" style="width: 10em"> <span style="color: #888">(Use /re/ syntax for regexp search)</span>',p='Replace: <input type="text" style="width: 10em"> <span style="color: #888">(Use /re/ syntax for regexp search)</span>',u='With: <input type="text" style="width: 10em">',
D="Replace? <button>Yes</button> <button>No</button> <button>Stop</button>";CodeMirror.commands.find=function(h){v(h);o(h)};CodeMirror.commands.findNext=o;CodeMirror.commands.findPrev=function(h){o(h,!0)};CodeMirror.commands.clearSearch=v;CodeMirror.commands.replace=n;CodeMirror.commands.replaceAll=function(h){n(h,!0)}})();(function(){CodeMirror.simpleHint=function(i,L){function r(){p||(p=!0,v.parentNode.removeChild(v))}function w(){i.replaceRange(x[n.selectedIndex],o.from,o.to);r();setTimeout(function(){i.focus()},50)}if(!i.somethingSelected()){var o=L(i);if(o&&o.list.length){var x=o.list;if(1==x.length)return i.replaceRange(x[0],o.from,o.to),!0;var v=document.createElement("div");v.className="CodeMirror-completions";var n=v.appendChild(document.createElement("select"));window.opera||(n.multiple=!0);for(var m=0;m<
x.length;++m)n.appendChild(document.createElement("option")).appendChild(document.createTextNode(x[m]));n.firstChild.selected=!0;n.size=Math.min(10,x.length);m=i.cursorCoords();v.style.left=m.x+"px";v.style.top=m.yBot+"px";document.body.appendChild(v);10>=x.length&&(v.style.width=n.clientWidth-1+"px");var p=!1;CodeMirror.connect(n,"blur",r);CodeMirror.connect(n,"keydown",function(m){var n=m.keyCode;13==n?(CodeMirror.e_stop(m),w()):27==n?(CodeMirror.e_stop(m),r(),i.focus()):38!=n&&40!=n&&(r(),i.focus(),
setTimeout(function(){CodeMirror.simpleHint(i,L)},50))});CodeMirror.connect(n,"dblclick",w);n.focus();window.opera&&setTimeout(function(){p||n.focus()},100);return!0}}}})();(function(){function i(i,n){for(var m=0,o=i.length;m<o;++m)n(i[m])}function L(v,n){function m(h){var i;if(i=0==h.indexOf(D)){a:if(Array.prototype.indexOf)i=-1!=u.indexOf(h);else{for(i=u.length;i--;)if(u[i]===h){i=!0;break a}i=!1}i=!i}i&&u.push(h)}function p(h){"string"==typeof h?i(r,m):h instanceof Array?i(w,m):h instanceof Function&&i(o,m);for(var n in h)m(n)}var u=[],D=v.string;if(n){var h=n.pop(),z;for("variable"==h.className?z=window[h.string]:"string"==h.className?z="":"atom"==h.className&&(z=
1);null!=z&&n.length;)z=z[n.pop().string];null!=z&&p(z)}else{for(h=v.state.localVars;h;h=h.next)m(h.name);p(window);i(x,m)}return u}CodeMirror.javascriptHint=function(i){var n=i.getCursor(),m=i.getTokenAt(n),o=m;for(/^[\w$_]*$/.test(m.string)||(m=o={start:n.ch,end:n.ch,string:"",state:m.state,className:"."==m.string?"property":null});"property"==o.className;){o=i.getTokenAt({line:n.line,ch:o.start});if("."!=o.string)return;o=i.getTokenAt({line:n.line,ch:o.start});if(!r)var r=[];r.push(o)}return{list:L(m,
r),from:{line:n.line,ch:m.start},to:{line:n.line,ch:m.end}}};var r="charAt,charCodeAt,indexOf,lastIndexOf,substring,substr,slice,trim,trimLeft,trimRight,toUpperCase,toLowerCase,split,concat,match,replace,search".split(","),w="length,concat,join,splice,push,pop,shift,unshift,slice,reverse,sort,indexOf,lastIndexOf,every,some,filter,forEach,map,reduce,reduceRight".split(","),o=["prototype","apply","call","bind"],x="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,throw,true,try,typeof,var,void,while,with".split(",")})();
